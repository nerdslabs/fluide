{"version":3,"sources":["../js/modal/main.ts","../js/module.ts","../js/scrollbar/events.ts","../js/scrollbar/main.ts","../js/tooltip/main.ts","../js/fluide.ts"],"names":["Modal","el","options","closeable","this","isOpened","HTMLElement","document","querySelector","backdrop","createElement","className","prototype","open","style","display","parentElement","insertBefore","nextSibling","bindEvents","close","removeChild","Object","defineProperty","state","_this","onclick","event","target","Module","Error","Events","scrollbar","isMac","navigator","platform","match","isWheeling","watcher","fps","onwheel","mouseWheel","scroll","bar","onmousedown","mouseDown","onscroll","userScrolled","onmouseup","mouseUp","setTimeout","tick","call","scrollHeight","calculateSizes","height","clientHeight","width","clientWidth","preventDefault","currentY","pageY","onmousemove","e","mouseMove","scrollDistance","maxPosition","move","distance","wheelDelta","deltaY","setBarPosition","Scrollbar","_super","position","scrollClass","classList","add","createScroll","__extends","overflow","offsetWidth","visibleProportion","barHeight","scrollTop","indexOf","clearTimeout","replace","marginTop","appendChild","events","Tooltip","onmouseenter","mouseEnter","onmouseleave","mouseLeave","text","getAttribute","tooltip","innerHTML","_a","getPosition","left","top","offsetLeft","offsetTop","version","fluide"],"mappings":"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","sourcesContent":["export default class Modal {\n  private el: HTMLElement\n  private options: Options\n  private isOpened: boolean = false\n  private backdrop: HTMLElement\n\n  constructor(el: HTMLElement | string, options: Options = {\n    closeable: true,\n  }) {\n    if (el instanceof HTMLElement) {\n      this.el = el\n    } else {\n      this.el = document.querySelector(el)\n    }\n    this.options = options\n\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = 'modal-backdrop'\n  }\n\n  public open() {\n    this.isOpened = true\n    this.el.style.display = 'block'\n\n    this.el.parentElement.insertBefore(this.backdrop, this.el.nextSibling)\n\n    this.bindEvents()\n  }\n\n  public close() {\n    this.isOpened = false\n    this.el.style.display = 'none'\n\n    this.el.parentElement.removeChild(this.backdrop)\n  }\n\n  get closeable(): boolean {\n    return this.options.closeable\n  }\n\n  set closeable(state: boolean) {\n    this.options.closeable = state\n  }\n\n  private bindEvents() {\n    this.backdrop.onclick = (this.options.closeable ? (event: MouseEvent) => {\n      if (this.backdrop === event.target) {\n        this.close()\n      }\n    } : null)\n  }\n}\n\nexport interface Options {\n  closeable: boolean\n}\n","export default abstract class Module {\n  public el: HTMLElement\n\n  constructor(el: HTMLElement | string) {\n    if (el instanceof HTMLElement) {\n      this.el = el\n    } else {\n      this.el = document.querySelector(el)\n    }\n\n    if (this.el === null) {\n      throw new Error('Provided Element is null or cannot be found.')\n    }\n  }\n}\n","import { debounce } from '../helpers'\nimport Scrollbar from './main'\n\nexport default class Events {\n  private scrollbar: Scrollbar\n  private currentY: number\n\n  private isMac: RegExpMatchArray = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)\n\n  private isWheeling: NodeJS.Timer = null\n\n  private watcher: NodeJS.Timer = null\n  private fps: number = 1000 / 24\n\n  constructor(scrollbar: Scrollbar) {\n    this.scrollbar = scrollbar\n\n    this.scrollbar.el.onwheel = event => this.mouseWheel(event)\n    this.scrollbar.scroll.onwheel = event => this.mouseWheel(event)\n    this.scrollbar.bar.onmousedown = event => this.mouseDown(event)\n    this.scrollbar.el.onscroll = event => this.userScrolled(event)\n\n    document.onmouseup = event => this.mouseUp(event)\n\n    this.watcher = setTimeout(() => this.tick.call(this), this.fps);\n  }\n\n  private tick() {\n    this.watcher = setTimeout(() => this.tick.call(this), this.fps);\n\n    if (this.scrollbar.el.scrollHeight !== this.scrollbar.scrollHeight) {\n      this.scrollbar.calculateSizes.call(this.scrollbar)\n    }\n\n    if (this.scrollbar.height !== this.scrollbar.el.clientHeight || this.scrollbar.width !== this.scrollbar.el.clientWidth) {\n      this.scrollbar.calculateSizes.call(this.scrollbar)\n    }\n  }\n\n  private mouseDown(this: Events, event: MouseEvent) {\n    event.preventDefault()\n    this.currentY = event.pageY\n    document.onmousemove = e => this.mouseMove(e)\n  }\n\n  private mouseMove(this: Events, event: MouseEvent) {\n    event.preventDefault()\n\n    const moveDistance = (event.pageY - this.currentY)\n    const scrollDistance = (moveDistance / this.scrollbar.maxPosition) * (this.scrollbar.scrollHeight - this.scrollbar.height)\n    this.currentY = event.pageY\n\n    this.scrollbar.move(scrollDistance)\n  }\n\n  private mouseWheel(this: Events, event: WheelEvent) {\n    event.preventDefault()\n\n    let distance = null\n\n    if (event.wheelDelta && (event.wheelDelta % 120) === 0) {\n      distance = -(event.wheelDelta / 10);\n    } else {\n      distance = event.deltaY\n    }\n\n    this.scrollbar.move(distance)\n  }\n\n  private mouseUp(this: Events, event: MouseEvent) {\n    document.onmousemove = null\n  }\n\n  private userScrolled(this: Events, event: UIEvent) {\n    this.scrollbar.setBarPosition()\n  }\n}\n","import Module from '../module'\nimport Events from './events'\n\nexport default class Scrollbar extends Module {\n\n  public scroll: HTMLElement\n  public bar: HTMLElement\n\n  public scrollHeight: number\n  public maxPosition: number = 0\n\n  public height: number\n  public width: number\n\n  private visibleProportion: number\n\n  private events: Events\n\n  private barHeight: number\n  private position: number = 0\n\n  private scrollClass: NodeJS.Timer = null\n\n  constructor(el: HTMLElement) {\n    super(el)\n\n    this.el.classList.add('scroll-content')\n\n    this.createScroll()\n    this.calculateSizes()\n  }\n\n  public calculateSizes() {\n    this.el.style.overflow = 'auto'\n    this.height = this.el.clientHeight\n    this.scrollHeight = this.el.scrollHeight\n    this.el.style.overflow = 'hidden'\n    this.el.style.display = 'inline-block'\n\n    this.el.style.width = null\n    this.el.style.width = 'calc(100% - ' + this.scroll.offsetWidth + 'px)'\n    this.width = this.el.clientWidth\n\n    const visibleProportion = this.height / this.scrollHeight\n\n    if (this.height * visibleProportion > 30) {\n      this.visibleProportion = visibleProportion\n      this.barHeight = this.height * visibleProportion\n    } else {\n      this.visibleProportion = 30 / this.height\n      this.barHeight = 30\n    }\n\n    this.maxPosition = this.height - this.barHeight\n\n    this.scroll.style.height = this.height + 'px'\n    this.bar.style.height = this.barHeight + 'px'\n\n    this.setBarPosition()\n  }\n\n  public move(distance: number) {\n    this.el.scrollTop = (distance + this.el.scrollTop)\n\n    this.scroll.className = this.scroll.className.indexOf('scroll-active') > 0 ? this.scroll.className : this.scroll.className + ' scroll-active'\n    clearTimeout(this.scrollClass)\n    this.scrollClass = setTimeout(() => {\n      this.scroll.className = this.scroll.className.replace(/\\s*scroll-active\\s*/g, '')\n    }, 500)\n  }\n\n  public setBarPosition() {\n    const position = (this.el.scrollTop / (this.scrollHeight - this.height)) * this.maxPosition\n\n    if (position <= 0) {\n      this.position = 0;\n    } else if (position < this.maxPosition) {\n      this.position = position;\n    } else {\n      this.position = this.maxPosition;\n    }\n\n    this.bar.style.marginTop = this.position + 'px';\n  }\n\n  private createScroll() {\n    this.scroll = document.createElement('div')\n    this.scroll.classList.add('scroll-bar')\n\n    this.bar = document.createElement('div')\n    this.bar.classList.add('bar')\n\n    this.scroll.appendChild(this.bar)\n\n    this.events = new Events(this)\n\n    this.el.parentElement.insertBefore(this.scroll, this.el.nextSibling)\n  }\n}\n","import Module from '../module';\n\nexport default class Tooltip extends Module {\n  private tooltip: HTMLElement\n\n  constructor(el: HTMLElement | string) {\n    super(el)\n\n    this.el.onmouseenter = (event) => this.mouseEnter(event)\n    this.el.onmouseleave = (event) => this.mouseLeave(event)\n  }\n\n  private mouseEnter(this: Tooltip, event: UIEvent) {\n    const text = this.el.getAttribute('alt')\n\n    this.tooltip = document.createElement('div')\n    this.tooltip.className = 'tooltip'\n    this.tooltip.innerHTML = text\n\n    this.el.parentElement.insertBefore(this.tooltip, this.el.nextSibling)\n\n    const { left, top } = this.getPosition()\n    this.tooltip.style.left = left + 'px'\n    this.tooltip.style.top = top + 'px'\n  }\n\n  private mouseLeave(this: Tooltip, event: UIEvent) {\n    this.el.parentElement.removeChild(this.tooltip)\n  }\n\n  private getPosition() {\n    const left = this.el.offsetLeft + (this.el.clientWidth / 2) - (this.tooltip.clientWidth / 2)\n    const top = this.el.offsetTop + this.el.clientHeight + 5\n\n    return {\n      left, top,\n    }\n  }\n\n}\n","import Modal from './modal/main'\nimport Scrollbar from './scrollbar/main'\nimport Tooltip from './tooltip/main'\n\nconst version = '__VERSION__'\n\nexport { Modal, Scrollbar, Tooltip, version }\n\nexport default {\n  Scrollbar, Modal, Tooltip, version,\n}\n"]}