/*!
 * Fluide v1.0.0-alpha.1
 * (c) 2018 nerdslabs
 * Released under the MIT License.
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.Fluide={})}(this,function(t){"use strict";function i(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);function e(){this.constructor=t}t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var s,o,e=function(){function t(){var t=this;this.tickTimout=null,this.tickInstances=[],this.fps=1e3/24,this.tickTimout=setTimeout(function(){return t.tick()},this.fps)}return t.prototype.addTickInstance=function(t){this.tickInstances.push(t)},t.prototype.tick=function(){var t=this;this.tickInstances.forEach(function(t){return t.onTick()}),this.tickTimout=setTimeout(function(){return t.tick()},this.fps)},Object.defineProperty(t,"all",{get:function(){return"undefined"==typeof window._fluide&&(window._fluide=new t),window._fluide},enumerable:!0,configurable:!0}),t}(),l=function(t){if(t instanceof HTMLElement?this.el=t:this.el=document.querySelector(t),null===this.el)throw new Error("Provided Element is null or cannot be found.");void 0!==this.onTick&&e.all.addTickInstance(this)},n=function(e){function t(t,i){void 0===i&&(i={closeable:!0});var o=e.call(this,t)||this;return o.opened=!1,o.content=o.el.querySelector(".modal-content"),o.options=i,o.bindEvents(),o}return i(t,e),t.prototype.open=function(){this.el.classList.add("visible"),this.opened=!0},t.prototype.close=function(){this.el.classList.remove("visible"),this.opened=!1},t.prototype.isOpened=function(){return this.opened},t.prototype.setCloseable=function(t){this.options.closeable=t,this.bindEvents()},t.prototype.isCloseable=function(){return this.options.closeable},t.prototype.bindEvents=function(){var i=this;this.el.onclick=this.options.closeable?function(t){t.target!==i.content&&i.close()}:null},t}(l),r=function(){function t(t){var i=this;this.isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),this.isWheeling=null,this.watcher=null,this.fps=1e3/24,this.scrollbar=t,this.scrollbar.el.onwheel=function(t){return i.mouseWheel(t)},this.scrollbar.scroll.onwheel=function(t){return i.mouseWheel(t)},this.scrollbar.bar.onmousedown=function(t){return i.mouseDown(t)},this.scrollbar.el.onscroll=function(t){return i.userScrolled(t)},document.onmouseup=function(t){return i.mouseUp(t)}}return t.prototype.tick=function(){var t=this;this.watcher=setTimeout(function(){return t.tick.call(t)},this.fps),this.scrollbar.el.scrollHeight!==this.scrollbar.scrollHeight&&this.scrollbar.calculateSizes.call(this.scrollbar),this.scrollbar.height===this.scrollbar.el.clientHeight&&this.scrollbar.width===this.scrollbar.el.clientWidth||this.scrollbar.calculateSizes.call(this.scrollbar)},t.prototype.mouseDown=function(t){var i=this;t.preventDefault(),this.currentY=t.pageY,document.onmousemove=function(t){return i.mouseMove(t)}},t.prototype.mouseMove=function(t){t.preventDefault();var i=(t.pageY-this.currentY)/this.scrollbar.maxPosition*(this.scrollbar.scrollHeight-this.scrollbar.height);this.currentY=t.pageY,this.scrollbar.move(i)},t.prototype.mouseWheel=function(t){var i=null;(0<(i=t.wheelDelta&&t.wheelDelta%120==0?-t.wheelDelta/10:t.deltaY)&&this.scrollbar.el.scrollTop<this.scrollbar.scrollHeight-this.scrollbar.height||i<0&&0<this.scrollbar.el.scrollTop)&&(t.preventDefault(),this.scrollbar.move(i))},t.prototype.mouseUp=function(t){document.onmousemove=null},t.prototype.userScrolled=function(t){this.scrollbar.setBarPosition()},t}(),h=function(o){function t(t){var i=o.call(this,t)||this;return i.maxPosition=0,i.position=0,i.scrollClass=null,i.createScroll(),i.calculateSizes(),i}return i(t,o),t.prototype.calculateSizes=function(){this.el.style.overflow="auto",this.height=this.el.clientHeight,this.scrollHeight=this.el.scrollHeight,this.el.style.overflow="hidden",this.el.style.display="inline-block",this.el.style.width=null,this.el.style.width="calc(100% - "+this.scroll.offsetWidth+"px)",this.width=this.el.clientWidth;var t=this.height/this.scrollHeight;30<this.height*t?(this.visibleProportion=t,this.barHeight=this.height*t):(this.visibleProportion=30/this.height,this.barHeight=30),this.maxPosition=this.height-this.barHeight,this.scroll.style.height=this.height+"px",this.bar.style.height=this.barHeight+"px",this.setBarPosition()},t.prototype.move=function(t){var i=this;this.el.scrollTop=t+this.el.scrollTop,this.scroll.className=0<this.scroll.className.indexOf("scroll-active")?this.scroll.className:this.scroll.className+" scroll-active",clearTimeout(this.scrollClass),this.scrollClass=setTimeout(function(){i.scroll.className=i.scroll.className.replace(/\s*scroll-active\s*/g,"")},500)},t.prototype.setBarPosition=function(){var t=this.el.scrollTop/(this.scrollHeight-this.height)*this.maxPosition;t<=0?this.position=0:t<this.maxPosition?this.position=t:this.position=this.maxPosition,this.bar.style.marginTop=this.position+"px"},t.prototype.onTick=function(){this.el.scrollHeight!==this.scrollHeight&&this.calculateSizes.call(this),this.height===this.el.clientHeight&&this.width===this.el.clientWidth||this.calculateSizes.call(this)},t.prototype.createScroll=function(){this.scroll=document.createElement("div"),this.scroll.className="scrollbar-handler",this.bar=document.createElement("div"),this.bar.className="bar",this.scroll.appendChild(this.bar),this.events=new r(this),this.el.parentElement.insertBefore(this.scroll,this.el.nextSibling)},t}(l);(o=s||(s={})).TOP="tooltip-top",o.BOTTOM="tooltip-bottom",o.LEFT="tooltip-left",o.RIGHT="tooltip-right",o.CLASS="";var c=function(e){function t(t,i){void 0===i&&(i=s.CLASS);var o=e.call(this,t)||this;return i===s.CLASS?-1<o.el.className.indexOf("tooltip-top")?o.position=s.TOP:-1<o.el.className.indexOf("tooltip-left")?o.position=s.LEFT:-1<o.el.className.indexOf("tooltip-right")?o.position=s.RIGHT:o.position=s.BOTTOM:o.position=i,o.el.onmouseenter=function(t){return o.mouseEnter(t)},o.el.onmouseleave=function(t){return o.mouseLeave(t)},o}return i(t,e),t.prototype.mouseEnter=function(t){var i=this.el.getAttribute("alt");this.tooltip=document.createElement("div"),this.tooltip.classList.add("tooltip",this.position),this.tooltip.innerHTML=i,document.body.appendChild(this.tooltip);var o=this.calculatePosition(),e=o.left,s=o.top;this.tooltip.style.left=e+"px",this.tooltip.style.top=s+"px",window.onscroll=this.mouseScroll.bind(this)},t.prototype.mouseLeave=function(t){document.body.removeChild(this.tooltip),window.onscroll=null},t.prototype.mouseScroll=function(t){var i=this.calculatePosition(),o=i.left,e=i.top;this.tooltip.style.left=o+"px",this.tooltip.style.top=e+"px"},t.prototype.calculatePosition=function(){var t,i,o=this.el.getBoundingClientRect();return this.position===s.BOTTOM?(t=o.left+this.el.offsetWidth/2-this.tooltip.offsetWidth/2,i=o.top+this.el.offsetHeight+5):this.position===s.TOP?(t=o.left+this.el.offsetWidth/2-this.tooltip.offsetWidth/2,i=o.top-this.tooltip.offsetHeight-5):this.position===s.LEFT?(t=o.left-this.tooltip.offsetWidth-5,i=o.top+this.el.offsetHeight/2-this.tooltip.offsetHeight/2):this.position===s.RIGHT&&(t=o.left+this.el.offsetWidth+5,i=o.top+this.el.offsetHeight/2-this.tooltip.offsetHeight/2),t<0?t=0:t+this.tooltip.offsetWidth>document.documentElement.scrollWidth&&(t=document.documentElement.scrollWidth-this.tooltip.offsetWidth),{left:t,top:i}},t.Position=s,t}(l),a="1.0.0-alpha.1",u={Scrollbar:h,Modal:n,Tooltip:c,version:a};t.Modal=n,t.Scrollbar=h,t.Tooltip=c,t.version=a,t.default=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=fluide.min.js.map